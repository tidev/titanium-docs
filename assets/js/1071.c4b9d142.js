(window.webpackJsonp=window.webpackJsonp||[]).push([[1071],{1235:function(t,s,a){"use strict";a.r(s);var n=a(21),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"windows-background-service-quick-start"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#windows-background-service-quick-start"}},[t._v("#")]),t._v(" Windows Background Service Quick Start")]),t._v(" "),a("h2",{attrs:{id:"introduction"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#introduction"}},[t._v("#")]),t._v(" Introduction")]),t._v(" "),a("p",[t._v("This guide walks through the steps to create, build and test an Windows background service module using Studio. The equivalent CLI instructions are given in the information boxes near the top of each section.")]),t._v(" "),a("h2",{attrs:{id:"windows-module-prerequisites"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#windows-module-prerequisites"}},[t._v("#")]),t._v(" Windows Module prerequisites")]),t._v(" "),a("div",{staticClass:"danger custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("â—ï¸ Warning")]),t._v(" "),a("p",[t._v("As of Titanium 9.0.0, building Windows apps is no longer supported.")])]),t._v(" "),a("div",{staticClass:"danger custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("â—ï¸ Warning")]),t._v(" "),a("p",[t._v("Support for Windows 8.1 and Windows Phone SDKs has been deprecated as of SDK 6.3.0.GA and has be removed in SDK 7.0.0.GA.")])]),t._v(" "),a("p",[t._v("To develop an Windows-based Module, you'll need all of the software required to build a Titanium application for Windows:")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Titanium SDK")])]),t._v(" "),a("li",[a("p",[t._v("Supported versions of Visual Studio and the Windows Phone SDK, as described in "),a("a",{attrs:{href:"#undefined"}},[t._v("Installing the Windows Phone SDK")])])]),t._v(" "),a("li",[a("p",[t._v("Studio or the Appcelerator Command-Line Interface (CLI) for creating modules, and building and running test applications")])])]),t._v(" "),a("p",[t._v("Like Windows application development, Windows module development is only supported on Windows. Create a new module")]),t._v(" "),a("p",[t._v("First, create a new module project.")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("ðŸ’¡ CLI Instructions")]),t._v(" "),a("p",[t._v("From a terminal, change the current working directory to your workspace and run:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")]),t._v("/TO/WORKSPACE\nappc new -n "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v(" --id com.example.test\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('### when prompted for the project type, select "Titanium Module"')]),t._v("\n")])])])]),t._v(" "),a("p",[t._v("In Studio:")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("From the menu, select "),a("strong",[t._v("File")]),t._v(" > "),a("strong",[t._v("New")]),t._v(" > "),a("strong",[t._v("Mobile Module Project")]),t._v(" to open the "),a("strong",[t._v("New Mobile Module Project")]),t._v(" dialog.")])]),t._v(" "),a("li",[a("p",[t._v("In the "),a("strong",[t._v("Project name")]),t._v(" field, enter "),a("strong",[t._v("test")]),t._v(".")])]),t._v(" "),a("li",[a("p",[t._v("In the "),a("strong",[t._v("Module Id")]),t._v(" field, enter "),a("strong",[t._v("com.example.test")]),t._v(".")])]),t._v(" "),a("li",[a("p",[t._v("In "),a("strong",[t._v("Deployment Targets")]),t._v(", select "),a("strong",[t._v("Windows")]),t._v(".")])]),t._v(" "),a("li",[a("p",[t._v("Click "),a("strong",[t._v("Next")]),t._v(", then click "),a("strong",[t._v("Finish")]),t._v(".")])])]),t._v(" "),a("p",[t._v("Studio sets up a new folder called "),a("code",[t._v("test")]),t._v(" that contains your module project.")]),t._v(" "),a("h2",{attrs:{id:"build-and-package-the-module"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#build-and-package-the-module"}},[t._v("#")]),t._v(" Build and package the module")]),t._v(" "),a("p",[t._v("Next, build the module and package it. This process produces a ZIP file containing a binary library with unprocessed module assets, example code and documentation.")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("ðŸ’¡ CLI Instructions")]),t._v(" "),a("p",[t._v("From a terminal, go to the module's windows directory and run the "),a("code",[t._v("appc run -p windows --build-only")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" test/windows\nappc run -p windows --build-only\n")])])]),a("p",[t._v("After the build completes, unzip the built module in the Titanium SDK home path: ("),a("code",[t._v("C:\\ProgramData\\Titanium")]),t._v(").")])]),t._v(" "),a("p",[t._v("In Studio:")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("Select your module folder in the "),a("strong",[t._v("Project Explorer")]),t._v(" view.")])]),t._v(" "),a("li",[a("p",[t._v("Verify "),a("strong",[t._v("Package")]),t._v(" and "),a("strong",[t._v("Windows Module")]),t._v(" are displayed in "),a("strong",[t._v("Launch Mode")]),t._v(" and "),a("strong",[t._v("Launch Target")]),t._v(", respectively.")])]),t._v(" "),a("li",[a("p",[t._v("Click the Package icon to open the "),a("strong",[t._v("Package Windows Module")]),t._v(" dialog.")])]),t._v(" "),a("li",[a("p",[t._v("In "),a("strong",[t._v("Output Location")]),t._v(", choose the "),a("strong",[t._v("Titanium SDK")]),t._v(" to install the module in the Titanium SDK home path to be accessed by any Titanium application.")])]),t._v(" "),a("li",[a("p",[t._v("Click "),a("strong",[t._v("Finish")]),t._v(".")])])]),t._v(" "),a("p",[t._v("Studio builds and installs the module to the Titanium SDK home path.")]),t._v(" "),a("h2",{attrs:{id:"test-the-module"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#test-the-module"}},[t._v("#")]),t._v(" Test the module")]),t._v(" "),a("p",[t._v("To test the module, create a test application and add the module as a dependency of the project. Then, load the module and make module API calls to the module reference.")]),t._v(" "),a("h3",{attrs:{id:"create-a-test-application"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-a-test-application"}},[t._v("#")]),t._v(" Create a test application")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("ðŸ’¡ CLI Instructions")]),t._v(" "),a("p",[t._v("From a new terminal window, change the current working directory to your workspace and run the following commands:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")]),t._v("/TO/WORKSPACE\nappc new -t titanium -p windows -n Hello -u http:// --id com.example.hello\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" Hello/\n")])])])]),t._v(" "),a("p",[t._v("In Studio:")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("From the menu, select "),a("strong",[t._v("File")]),t._v(" > "),a("strong",[t._v("New")]),t._v(" > "),a("strong",[t._v("Mobile App Project")]),t._v(" to open the "),a("strong",[t._v("New Mobile App Project")]),t._v(" dialog.")])]),t._v(" "),a("li",[a("p",[t._v("On the "),a("strong",[t._v("Project Template")]),t._v(" page, select "),a("strong",[t._v("Default Alloy Project")]),t._v(" as the template type, then click "),a("strong",[t._v("Next")]),t._v(".")])]),t._v(" "),a("li",[a("p",[t._v("On the "),a("strong",[t._v("Project Location")]),t._v(" page, enter the following information:")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("In the "),a("strong",[t._v("Project Name")]),t._v(" field, enter "),a("strong",[t._v("Hello")]),t._v(".")])]),t._v(" "),a("li",[a("p",[t._v("In the "),a("strong",[t._v("App ID")]),t._v(" field, enter "),a("strong",[t._v("com.example.hello")]),t._v(".")])]),t._v(" "),a("li",[a("p",[t._v("In "),a("strong",[t._v("Deployment Targets")]),t._v(", select "),a("strong",[t._v("Windows")]),t._v(".")])])])]),t._v(" "),a("li",[a("p",[t._v("Click "),a("strong",[t._v("Finish")]),t._v(" to create the project.")])])]),t._v(" "),a("p",[t._v("Studio sets up a new folder called "),a("code",[t._v("Hello")]),t._v(" that contains the test application you will be using to test the module.")]),t._v(" "),a("h3",{attrs:{id:"add-the-module-as-a-dependency-to-the-project"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#add-the-module-as-a-dependency-to-the-project"}},[t._v("#")]),t._v(" Add the module as a dependency to the project")]),t._v(" "),a("p",[t._v("To load the module in the application, you need to add it as a dependency to the project.")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("ðŸ’¡ CLI Instructions")]),t._v(" "),a("p",[t._v("Open the "),a("code",[t._v("tiapp.xml")]),t._v(" and update the "),a("code",[t._v("<modules/>")]),t._v(" element to include the module as a dependency to the project. In addition to that Windows background module requires "),a("code",[t._v("Extension")]),t._v(" element with "),a("code",[t._v("EntryPoint")]),t._v(" specified. In "),a("code",[t._v("EntryPoint")]),t._v(' you need to specify a background service class name, which is named "camel-cased module identifier" plus "'),a("code",[t._v("BackgroundServiceTask")]),t._v('". In this example since we uses "com.example.test" as an module id, background task entry point goes to "'),a("code",[t._v("ComExampleTest.BackgroundServiceTask")]),t._v('".')]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("ti:")]),t._v("app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("modules")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("module")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("platform")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("windows"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("com.example.test"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("module")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("modules")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("windows")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("manifest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Extensions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Extension")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("Category")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("windows.backgroundTasks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("EntryPoint")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ComExampleTest.BackgroundServiceTask"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("BackgroundTasks")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Task")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("Type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("timer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("BackgroundTasks")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("Extension")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("Extensions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("manifest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("windows")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("ti:")]),t._v("app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])]),t._v(" "),a("h3",{attrs:{id:"load-the-module-and-make-module-api-calls"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#load-the-module-and-make-module-api-calls"}},[t._v("#")]),t._v(" Load the module and make module API calls")]),t._v(" "),a("p",[t._v("Open the "),a("code",[t._v("app.js")]),t._v(" file and replace the code with the following, which invokes background service API calls to the module. In this example we use "),a("code",[t._v("registerTimerTask")]),t._v(" to register "),a("a",{attrs:{href:"https://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.background.timetrigger.aspx",target:"_blank",rel:"noopener noreferrer"}},[t._v("Windows::ApplicationModel::Background::TimeTrigger"),a("OutboundLink")],1),t._v(" which is invoked for each 15 minutes interval.")]),t._v(" "),a("p",[a("strong",[t._v("app.js")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" win "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Ti"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("UI")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createWindow")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" task"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nwin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'open'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Clear all tasks that is associated with this app")]),t._v("\n  Ti"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("App"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Windows"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("BackgroundService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unregisterAllTasks")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Register new task that is invoked for each 15 minutes interval.")]),t._v("\n  task "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Ti"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("App"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Windows"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("BackgroundService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("registerTimerTask")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ComExampleTest.BackgroundServiceTask'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("task"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Ti"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("API")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Background task is registered: task id="')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" task"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("taskId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nwin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"run-the-application"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#run-the-application"}},[t._v("#")]),t._v(" Run the application")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("ðŸ’¡ CLI Instructions")]),t._v(" "),a("p",[t._v("From a terminal that has the test app as its current working directory, run:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("appc run -p windows\n")])])])]),t._v(" "),a("p",[t._v("In the Studio toolbar, select "),a("strong",[t._v("Run")]),t._v(" in "),a("strong",[t._v("Launch Modes")]),t._v(" and select an Windows Phone simulator in "),a("strong",[t._v("Launch Targets")]),t._v(".")]),t._v(" "),a("p",[t._v("Studio builds and launches the application on the select Windows Phone simulator. Monitor the "),a("strong",[t._v("Console")]),t._v(" view for log output.")]),t._v(" "),a("p",[t._v("The console lines seen below show us that the module is working as expected.")]),t._v(" "),a("p",[a("strong",[t._v("Console")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[INFO]  Background task is registered: task id=0\n")])])]),a("h2",{attrs:{id:"modify-the-module"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#modify-the-module"}},[t._v("#")]),t._v(" Modify the module")]),t._v(" "),a("p",[t._v("Let's modify the module code to create a view object and access a string property.")]),t._v(" "),a("p",[t._v("First, look at some of the default files created by the Titanium SDK. Expand the "),a("code",[t._v("windows")]),t._v(" folder. Inside this folder are two files:")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("src/ComExampleTest.cpp")]),t._v(": This is a boilerplate Module class. Every module requires a module class, which acts as the base API for the module.")])]),t._v(" "),a("li",[a("p",[t._v("i"),a("code",[t._v("nclude/ComExampleTest.hpp")]),t._v(": This is a header file for the boiler plate class.")])])]),t._v(" "),a("h3",{attrs:{id:"implement-background-task"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#implement-background-task"}},[t._v("#")]),t._v(" Implement background task")]),t._v(" "),a("p",[t._v("In "),a("code",[t._v("ComExampleTestModule.cpp")]),t._v(" file you'll find "),a("code",[t._v("BackgroundServiceTask")]),t._v(" class inside namespace "),a("code",[t._v("ComExampleTest")]),t._v(".")]),t._v(" "),a("p",[a("strong",[t._v("ComExampleTest.cpp")])]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" ComExampleTest\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n     * @class\n     * @discussion This is background task for BackgroundService.\n     *             EntryPoint: ComExampleTest.BackgroundServiceTask\n     *\n     *   Usage: (JavaScript)\n     *     var task = Ti.App.Windows.BackgroundService.registerTimerTask(\n     *                          'ComExampleTest.BackgroundServiceTask', 15, false);\n     *\n     *   Don't remove this class because Windows Store submission process requires\n     *   at least one C++/CX class in winmd. (TIMOB-20192)\n     *\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Windows"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("Foundation"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("Metadata"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("WebHostHidden"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" ref "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BackgroundServiceTask")]),t._v(" sealed "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" Windows"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("ApplicationModel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("Background"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("IBackgroundTask\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("virtual")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Windows"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("ApplicationModel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("Background"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("IBackgroundTaskInstance"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),t._v(" taskInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n     * BackgroundServiceTask::Run implementation\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" BackgroundServiceTask"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("IBackgroundTaskInstance"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),t._v(" taskInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("auto")]),t._v(" deferral "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" taskInstance"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetDeferral")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// BACKGROUND TASK: IMPLEMENT SOMETHING USEFUL HERE :)")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Inform this task has finished")]),t._v("\n        deferral"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Complete")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("BackgroundServiceTask implements Windows Background Service "),a("a",{attrs:{href:"https://msdn.microsoft.com/library/windows/apps/br224794",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("IBackgroundTask")]),a("OutboundLink")],1),t._v(" interface so you can implement a task that works in the background. The implementation for background task should be inside "),a("code",[t._v("BackgroundServiceTask::Run")]),t._v(" function:")]),t._v(" "),a("p",[a("strong",[t._v("ComExampleTest.cpp")])]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n * BackgroundServiceTask::Run implementation\n */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" BackgroundServiceTask"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("IBackgroundTaskInstance"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),t._v(" taskInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("auto")]),t._v(" deferral "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" taskInstance"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetDeferral")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// BACKGROUND TASK: IMPLEMENT SOMETHING USEFUL HERE :)")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Inform this task has finished")]),t._v("\n    deferral"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Complete")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("Let's implement something useful here: let say we want a number to count how many times background task is executed. Important thing you need to know here is that "),a("code",[t._v("BackgroundServiceTask")]),t._v(" doesn't have a state because background task is executed and finished on each invocation. So you need a way to save a state: in this case we can use "),a("code",[t._v("ApplicationData::Current->LocalSettings")]),t._v(" or local file storage to store values. In this example let's use "),a("code",[t._v("LocalSettings")]),t._v(" for now:")]),t._v(" "),a("p",[a("strong",[t._v("ComExampleTest.cpp")])]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("using")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" Windows"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("Foundation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("using")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" Windows"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("ApplicationModel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("Background"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("using")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" Windows"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("Storage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n * BackgroundServiceTask::Run implementation\n */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" BackgroundServiceTask"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("IBackgroundTaskInstance"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),t._v(" taskInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("auto")]),t._v(" deferral "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" taskInstance"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetDeferral")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" count "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("auto")]),t._v(" settings "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ApplicationData"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("Current"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("LocalSettings"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("auto")]),t._v(" values "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" settings"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("Values"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// In this example we use "ComExampleTest.BackgroundServiceTask.count" key to store count value')]),t._v("\n    Platform"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("String"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),t._v(" key "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ComExampleTest.BackgroundServiceTask.count"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Restore count from settings...")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("values"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("HasKey")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       count "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" safe_cast"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("IPropertyValue"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("values"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Lookup")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetInt32")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Let's count up")]),t._v("\n    count"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Save the count so that BackgroundServiceTask can lookup.")]),t._v("\n    settings"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("Values"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Insert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ComExampleTest.BackgroundServiceTask.count"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("dynamic_cast")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("PropertyValue"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("PropertyValue"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateInt32")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Inform this task has finished")]),t._v("\n    deferral"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Complete")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("In this example we saves count value to "),a("code",[t._v('"ComExampleTest.BackgroundServiceTask.count"')]),t._v(" local setting. Good new is that you can actually get the value from JavaScript using "),a("code",[t._v("Ti.App.Properties")]),t._v(' with same key "'),a("code",[t._v("ComExampleTest.BackgroundServiceTask.count")]),t._v('". Because we save the state in the local settings, count value is still saved even when app is finished or even all background tasks are unregistered.')]),t._v(" "),a("p",[a("strong",[t._v("app.js")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" win "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Ti"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("UI")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createWindow")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" task"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nwin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'open'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Let's print out task execution count")]),t._v("\n  Ti"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("API")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Task execution count: '")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" Ti"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("App"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Properties"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ComExampleTest.BackgroundServiceTask.count'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Clear all tasks that is associated with this app")]),t._v("\n  Ti"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("App"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Windows"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("BackgroundService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unregisterAllTasks")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Register new task that is invoked for each 15 minutes interval.")]),t._v("\n  task "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Ti"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("App"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Windows"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("BackgroundService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("registerTimerTask")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ComExampleTest.BackgroundServiceTask'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("task"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Ti"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("API")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Background task is registered: task id='")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" task"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("taskId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nwin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"next-steps"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#next-steps"}},[t._v("#")]),t._v(" Next steps")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("For information about Windows Runtime Background Service API, see "),a("a",{attrs:{href:"https://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.background.aspx",target:"_blank",rel:"noopener noreferrer"}},[t._v("Windows.ApplicationModel.Background namespace"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[t._v("For a general overview of background tasks in Windows Store apps, see the "),a("a",{attrs:{href:"https://www.microsoft.com/download/en/details.aspx?id=27411",target:"_blank",rel:"noopener noreferrer"}},[t._v("Introduction to Background Tasks"),a("OutboundLink")],1),t._v(" whitepaper")])]),t._v(" "),a("li",[a("p",[t._v("For example code that shows how to implement background tasks, see the "),a("a",{attrs:{href:"http://code.msdn.microsoft.com/windowsapps/background-task-sample-9209ade9",target:"_blank",rel:"noopener noreferrer"}},[t._v("Background Task Sample"),a("OutboundLink")],1),t._v(".")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);